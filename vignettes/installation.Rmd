---
title: "Installation"
author: "Xianghui Dong"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Installation}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Package installation

If you met errors in install/upgrade lots of packages, restart R session and install again often can solve the problem.

### Windows

Some packages need to be built from source, and you need to install RTools in windows. Just follow the instructions when prompted.

### Linux
- Following instructions [here for installing R](https://cloud.r-project.org/bin/linux/ubuntu/) (assuming Ubuntu or Linux Mint). Make sure to install `r-base-dev` too.
- RStudio have installer for Linux.
- Some of the packages needed for the app need extra steps to install properly:
  + `devtools` need `libcurl`, `ssl` if it's not already installed in your system. You can watch error messages to check what is required. I installed them in Linux Mint 18 with
  
        sudo apt-get install libcurl4-openssl-dev
        sudo apt-get install libssl-dev
  
  + `ctmm` need `rgdal`, which need another two libraries in linux:
  
        sudo apt-get update && sudo apt-get install libgdal-dev libproj-dev
  
## Known limitations
- The app is started with system browser, while usually Shiny app is launched with RStudio builtin browser. The builtin browser has these known limitations:
    - `Windows`: log scale slider not shown properly; download dialog don't prompt proper file name by default.
    - `Mac`: download file will open a blank page, and the dowload function was executed twice so there will be two entries in report.
    - `Linux`: download dialog do not respond.
    Firefox is also known to have some limitations.
- There is a [known bug](https://github.com/Rdatatable/data.table/issues/2137) caused by `data.table`, `openMP` and `mcapply` in R 3.4. So it's possible to see this error when fitting models in parallel under Mac/Linux:

    ```r
    Assertion failure at kmp_runtime.cpp(6480): __kmp_thread_pool == __null.
    OMP: Error #13: Assertion failure at kmp_runtime.cpp(6480).
    ```

  The error is pretty random and hard to reproduce, but usually you can restart R session and it should dissappear.
  
  It's also possible to meet mysterious bugs with parallel operations in a long session. Restart R usually can solve the problem. 
  
  You can also disable the parallel mode in first box of `Import` page.
